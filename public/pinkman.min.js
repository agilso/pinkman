(function(){window.sleep=function(n,t){var e;return e=1e3*n,window._sleeping=setTimeout(t,e)},Number.prototype.print=function(n,t,e){var i,r,o,l;return o=this,n=isNaN(n=Math.abs(n))?2:n,e=void 0===e?".":e,t=void 0===t?",":t,l=o<0?"-":"",i=String(parseInt(o=Math.abs(Number(o)||0).toFixed(n))),r=(r=i.length)>3?r%3:0,l+(r?i.substr(0,r)+t:"")+i.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+t)+(n?e+Math.abs(o-i).toFixed(n).slice(2):"")}}).call(this),function(){var n=[].slice;window.Pinkman=function(){function t(){}return t.collections=[],t.objects=[],t.all=[],t.get=function(n){return this.all[n]},t.count=function(){return this.all.length},t.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},t.isArray=function(n){return null!=n&&n.constructor===Array},t.isString=function(n){return null!=n&&"string"==typeof n},t.isPrintable=function(n){return this.isString(n)||this.isNumber(n)},t.ctrl_c=function(n){var t,e;e=document.createElement("textarea"),e.style.position="fixed",e.style.top=0,e.style.left=0,e.style.width="2em",e.style.height="2em",e.style.padding=0,e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",e.value=n,document.body.appendChild(e),e.select();try{t=document.execCommand("copy"),this.ctrl_v=n}catch(n){}return document.body.removeChild(e),t},t.doAfter=function(n,t,e){return null==e&&(e="_pinkman_doAfter"),window[e]=window.setTimeout(t,100*n)},t.clearTimeout=function(n){return null==n&&(n="_pinkman_doAfter"),window.clearTimeout(window[n])},t.defineGlobalVar=function(n,t){return window[n]=t},t.onlyOnce=function(){var t,e,i;if(e=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],"function"==typeof e&&(i=new Object,i.f=e.toString(),i.args=t,this.calledFunctions.indexOf(i)===-1))return this.calledFunctions.push(i),e.apply(null,t)},t.json2url=function(n,t){var e,i,r,o;if(null!=n){if(null!=t&&"object"==typeof t&&(r=[],i=Object.keys(t).length,i>=1)){for(e in t)o=t[e],r.push(e+"="+o);n+="?",n+=r.join("&")}return n}return""},t.objToArray=function(n){var t,e,i,r;e=0,t=[];for(i in n)r=n[i],t.push({index:e,key:i,value:r}),e+=1;return t},t.unescape=function(n){var e,i,r,o;if(t.isString(n)){r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/","&#x60;":"`","&#x3D;":"="},i=[];for(e in r)o=r[e],i.push("(?:"+e+")");return window.regexp=new RegExp(i.join("+|")+"+","gm"),n.replace(regexp,function(n){return r[n]})}return""},t.calledFunctions=[],t.scope=function(n){var t;if(null!=n)return t=this.getSelfScope(n),null==t&&(t=this.getClassScope(n)),null==t&&(t=this.getAppScope(n)),t},t.hasScope=function(n){return null!=n&&(this.hasSelfScope(n)||this.hasClassScope(n)||this.hasAppScope(n))},t.hasSelfScope=function(n){return null!=n&&null!=n.scope&&""!==n.scope},t.hasClassScope=function(n){return null!=n&&null!=n.constructor.scope&&""!==n.constructor.scope},t.hasAppScope=function(n){return null!=n&&("collection"===n.pinkmanType&&"undefined"!=typeof AppCollection&&null!==AppCollection&&null!=AppCollection.scope&&""!==AppCollection||"object"===n.pinkmanType&&"undefined"!=typeof AppObject&&null!==AppObject&&null!=AppObject.scope&&""!==AppObject.scope)},t.getSelfScope=function(n){if(this.hasSelfScope(n))return n.scope},t.getClassScope=function(n){if(this.hasClassScope(n))return n.constructor.scope},t.getAppScope=function(n){return"object"==typeof n&&"collection"===n.pinkmanType&&"undefined"!=typeof AppCollection&&null!==AppCollection&&null!=AppCollection.scope?AppCollection.scope:"object"==typeof n&&"object"===n.pinkmanType&&"undefined"!=typeof AppObject&&null!==AppObject&&null!=AppObject.scope?AppObject.scope:void 0},t.ready=function(n){return $(document).ready(n)},t.ajax={request:function(n){var t;return null!=n.url&&(t=jQuery.ajax(n.url,{beforeSend:function(n){return n.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},type:n.type,dataType:"json",data:n.data}),t.done(function(t){return function(e){return null!=e&&null!=e.errors?null!=n.error&&"function"==typeof n.error&&n.error(t):null!=n.success&&"function"==typeof n.success&&n.success(e),null!=n.complete&&"function"==typeof n.complete&&n.complete(e),!0}}(this)))},get:function(n){return n.type="GET",this.request(n)},post:function(n){return n.type="POST",this.request(n)},put:function(n){return n.type="PUT",this.request(n)},patch:function(n){return n.type="PATCH",this.request(n)},"delete":function(n){return n.type="DELETE",this.request(n)},file:function(n){var t;return null!=n.url&&(t=jQuery.ajax(n.url,{beforeSend:function(n){return n.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},xhr:function(){var t;return t=$.ajaxSettings.xhr(),t.upload.addEventListener("progress",function(t){if(t.lengthComputable&&null!=n.progress)return n.progress(t.loaded/t.total)},!1),t.addEventListener("progress",function(t){if(t.lengthComputable&&null!=n.progress)return n.progress(t.loaded/t.total)},!1),t},type:"POST",dataType:"json",data:n.data,processData:!1,contentType:!1}),t.done(function(t){return function(e){return null!=e&&null!=e.errors?(null!=n.error&&"function"==typeof n.error&&n.error(t),!1):(null!=n.success&&"function"==typeof n.success&&n.success(e),null!=n.complete&&"function"==typeof n.complete?n.complete(e):void 0)}}(this)),this)},upload:function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.file.apply(this,t)}},t}(),Pinkman.ready(function(){if(null==Pinkman.pathname&&(Pinkman.pathname=window.location.pathname,"/"!==Pinkman.pathname.charAt([Pinkman.pathname.length]-1)))return Pinkman.pathname=Pinkman.pathname+"/"})}.call(this),function(){window.Pinkman.mixin=function(n,t){var e;if(null!=n&&"string"==typeof n&&null!=t&&"object"==typeof t)return null==Pinkman.mixins&&(Pinkman.mixins=new Pinkman.collection),e=new Pinkman.object,e.set("mix",t),e.set("name",n),Pinkman.mixins.forcePush(e)},window.Pinkman.mixit=function(n,t){var e,i,r,o;if(i=Pinkman.mixins.getBy("name",t),null!=i){o=i.mix;for(r in o)e=o[r],e["super"]=n.prototype[r],n.prototype[r]=e;return!0}return!1}}.call(this),function(){var n=[].slice;window.PinkmanCommon=function(){function t(n){this._listening=!0,this.isPink=!0,this.pinkey=Pinkman.all.length,Pinkman.all.push(this),null!=n&&this.initialize(n)}return t.privateAttributes=["isPink","isObject","isCollection","pinkey","config","pinkmanType","collections","renderQueue","_listening"],t.mixin=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],Pinkman.mixin.apply(Pinkman,t)},t.mixit=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],Pinkman.mixit.apply(Pinkman,[this].concat(n.call(t)))},t.isInstance=function(n){return n.constructor===this},t.prototype.initialize=function(n){var t,e,i;if("object"==typeof n){e=[];for(t in n)i=n[t],PinkmanObject.privateAttributes.indexOf(t)===-1?e.push(this.set(t,i)):e.push(void 0);return e}},t.prototype.api=function(){if(null!=this.config&&null!=this.config.api)return"/"===this.config.api.charAt(0)?this.config.api+"/":"/"+this.config.api+"/"},t.prototype.isInstanceOf=function(n){return this.constructor===n},t.prototype.className=function(){return null!=this.config&&null!=this.config.className?this.config.className:this.constructor.name},t.prototype.set=function(n,t,e){var i;if(null==e&&(e=""),null!=n&&null!=t)return this[n]=t,"function"==typeof e&&e(this),null!=this.pinkey&&this._listening&&(i="__pSync__"+this.pinkey+"__",null!=window[i]&&clearTimeout(window[i]),window[i]=sleep(.005,function(t){return function(){if(t._listening)return t.sync(n)}}(this))),this},t.prototype.sync=function(n){var t,e,i,r,o,l,u;if(null!=this.constructor.__computed)for(o=this.constructor.__computed,e=0,r=o.length;e<r;e++)t=o[e],null!=this[t]&&"function"==typeof this[t]&&Pinkman.sync(this,t,this[t].call(this));if(null!=n&&""!==n)Pinkman.sync(this,n,this[n]);else{l=this.attributes();for(i in l)u=l[i],Pinkman.sync(this,i,u)}return!0},t.prototype.lazySync=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],sleep(.25,function(n){return function(){return n.sync.apply(n,t)}}(this))},t.prototype.stop=function(){return console.log("[deprecated] stop function deprecated. Use unwatch instead."),this._listening=!1},t.prototype.watch=function(){return this._listening=!0},t.prototype.unwatch=function(){return this._listening=!1},t.prototype.unset=function(n,t){return delete this[n],"function"==typeof t&&t(this),this},t.prototype.render=function(n){var t;return"object"==typeof n?(n.object=this,null!=n.template&&""!==n.template||(n.template=n.target+"-template"),Pinkman.render(n)):"string"==typeof n?(t={object:this,target:n,template:n+"-template"},Pinkman.render(t)):null==n?this.reRender():void 0},t.prototype.reRender=function(n){return null==n&&(n=""),Pinkman.reRender(this),"function"==typeof n&&n(this),this},t.prototype.renderFirst=function(){return Pinkman.render(this.renderQueue.first())},t.prototype.renderLast=function(){return Pinkman.render(this.renderQueue.last())},t.prototype.append=function(n){var t,e,i,r,o;if(null!=n&&"object"==typeof n&&null!=n.target){null!=n.template&&""!==n.template||(n.template=n.target+"-template"),e=new Object;for(t in n)r=n[t],"target"!==t&&"callback"!==t&&(e[t]=r);return e.reRender=!1,i=n.target,o=n.wrapIn,e.object=this,e.callback=function(t,e){if(null!=o?$("#"+i).append("<div class='"+o+"'>"+e+"</div>"):$("#"+i).append(e),null!=n.callback&&"function"==typeof n.callback)return n.callback(t,e)},Pinkman.render(e)}if(null!=n&&Pinkman.isString(n))return this.append({template:n+"-template",target:n})},t.prototype.queue=function(n){return n.id=n.template,null==this.renderQueue&&(this.renderQueue=new PinkmanCollection),this.renderQueue.directPush(n)},t.prototype.hasErrorOn=function(n){var t,e,i,r,o;if(null!=n&&(Pinkman.isArray(n)||Pinkman.isString(n))){if(e=Pinkman.isArray(n)?n:[n],o=!0,null!=this.errors)for(i=0,r=e.length;i<r;i++)t=e[i],null!=this.errors[t]&&(o=!1);return!o}},t.prototype.hasErrorsOn=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.hasErrorOn.apply(this,t)},t.prototype.anyErrorOn=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.hasErrorOn.apply(this,t)},t.prototype.anyErrorsOn=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.hasErrorOn.apply(this,t)},t.prototype._data=function(){return{pink_obj:this.json(),scope:Pinkman.scope(this)}},t.compute=function(n){return this.__computed||(this.__computed=[]),this.__computed.indexOf(n)!==-1?this.__computed.push(n):this.__computed.push(n)},t}()}.call(this),function(){var n=function(n,e){function i(){this.constructor=n}for(var r in e)t.call(e,r)&&(n[r]=e[r]);return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n},t={}.hasOwnProperty,e=[].slice;window.PinkmanObject=function(t){function i(){var n;n=1<=arguments.length?e.call(arguments,0):[],i.__super__.constructor.apply(this,n),this.isObject=!0,this.pinkmanType="object",this.collections=new PinkmanCollection,Pinkman.objects.push(this)}return n(i,t),i.pinkmanType="object",i.prototype.assign=function(n){var t,e;if("object"==typeof n){for(t in n)e=n[t],"object"==typeof e&&null!=e&&null!=this[t]&&this[t].isPink&&!e.isPink?this[t].assign(e):this.set(t,e);return!0}return!1},i.prototype.attributes=function(){var n,t,e;n=new Object;for(t in this)e=this[t],i.privateAttributes.indexOf(t)===-1&&"function"!=typeof e&&(null!=e&&"object"==typeof e&&e.isPink?n[t]=e.attributes():n[t]=e);return n},i.prototype.json=function(){var n,t,e;n=new Object;for(t in this)e=this[t],i.privateAttributes.indexOf(t)===-1&&"function"!=typeof e&&(null!=e&&"object"==typeof e&&e.isPink?e.isCollection||(n[t]=e.json()):n[t]=e);return n},i.prototype.attributesKeys=function(){return Object.keys(this.attributes())},i.prototype.keys=function(){return this.attributesKeys()},i.prototype.toString=function(){var n,t,e,i,r;for(t=[],t.push("("+this.className()+")"),r=this.attributesKeys(),e=0,i=r.length;e<i;e++)n=r[e],t.push(n+": "+this[n]+";");return t.join(" ")},i.prototype.next=function(n){var t;if(null==n&&(n=""),n.isPink&&"collection"===n.pinkmanType)return n.next(this);if(Pinkman.isNumber(n)){if(t=this.collections.get(n),null!=t)return t.next(this)}else if((null==n||""===n)&&this.collections.any())return this.collections.first().next(this)},i.prototype.prev=function(n){var t;if(null==n&&(n=""),n.isPink&&"collection"===n.pinkmanType)return n.prev(this);if(Pinkman.isNumber(n)){if(t=this.collections.get(n),null!=t)return t.prev(this)}else if((null==n||""===n)&&this.collections.any())return this.collections.first().prev(this)},i.prototype.clearCollections=function(){var n,t,e,i,r;for(i=this.collections.collection,r=[],t=0,e=i.length;t<e;t++)n=i[t],r.push(n.remove(this));return r},i.prototype.removeFromCollections=function(){return this.clearCollections()},i.prototype.removeFromAllCollections=function(){return this.clearCollections()},i.prototype.removeAllCollections=function(){return this.clearCollections()},i.prototype.firstError=function(){var n;if(null!=this.errors)return n=Object.keys(this.errors)[0],n+" "+this.errors[n][0]},i.find=function(n,t){var e,i;return null==t&&(t=""),e=new this,i=new Object,i.scope=Pinkman.scope(this),Pinkman.ajax.get({url:Pinkman.json2url(e.api()+n,i),complete:function(n){if(e.assign(n),null!=e.error||null!=e.errors)throw new Error(e.firstError());if(null!=t&&"function"==typeof t)return t(e)}}),e},i.prototype.create=function(n){if(null==n&&(n=""),null==this.id)return Pinkman.ajax.post({url:this.api(),data:this._data(),complete:function(t){return function(e){if(t.assign(e),null==e.errors&&delete t.errors,null!=n&&"function"==typeof n)return n(t)}}(this)}),this},i.prototype.update=function(n){if(null==n&&(n=""),null!=this.id)return Pinkman.ajax.patch({url:this.api()+this.id,data:this._data(),complete:function(t){return function(e){if(t.assign(e),null==e.errors&&delete t.errors,null!=n&&"function"==typeof n)return n(t)}}(this)}),this},i.prototype.reload=function(n){var t;return t=new Object,t.scope=Pinkman.scope(this),Pinkman.ajax.get({url:Pinkman.json2url(this.api()+this.id,t),complete:function(t){return function(e){if(t.assign(e),null!=t.error||null!=t.errors)throw new Error(t.firstError());if(null!=n&&"function"==typeof n)return n(t)}}(this)}),this},i.prototype.updateAttributes=function(n){return!!this.assign(n)&&this.save(function(n){return n})},i.prototype.save=function(n){return null==n&&(n=""),null!=this.id&&""!==this.id?this.update(n):this.create(n)},i.prototype.destroy=function(n){return null==n&&(n=""),null!=this.id&&(this.removeFromAllCollections(),Pinkman.ajax["delete"]({url:this.api()+this.id,data:{scope:Pinkman.scope(this)},complete:function(t){return function(e){if(t.assign(e),null==e.errors&&delete t.errors,null==t.errors&&(t.id=null),null!=n&&"function"==typeof n)return n(t)}}(this)}),this)},i.prototype["delete"]=function(n){return null==n&&(n=""),null!=this.id&&(Pinkman.ajax["delete"]({url:this.api()+this.id,data:{scope:Pinkman.scope(this)},complete:function(t){return function(e){if(t.assign(e),null==e.errors&&delete t.errors,null==t.errors&&(t.id=null),null!=n&&"function"==typeof n)return n(t)}}(this)}),this)},i}(window.PinkmanCommon),window.Pinkman.object=window.PinkmanObject}.call(this),function(){var n=function(n,e){function i(){this.constructor=n}for(var r in e)t.call(e,r)&&(n[r]=e[r]);return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n},t={}.hasOwnProperty,e=[].slice;window.PinkmanCollection=function(t){function i(){var n;n=1<=arguments.length?e.call(arguments,0):[],i.__super__.constructor.apply(this,n),this.isCollection=!0,this.pinkmanType="collection",this.collection=[],Pinkman.collections.push(this)}return n(i,t),i.pinkmanType="collection",i.prototype.config={memberClass:PinkmanObject},i.prototype.attributes=function(){return this.collection},i.prototype.json=function(){var n;return n=[],this.each(function(t){if(t.isPink&&null!=t.json&&"function"==typeof t.json)return n.push(t.json())}),n},i.prototype.sum=function(n,t){var e;return null!=n?(e=0,this.each(function(t){return Pinkman.isNumber(t[n])?e=Number(t[n])+e:null!=t[n]?e=t[n]+e:void 0},function(n){return function(){if("function"==typeof t)return t(n,e)}}(this)),e):("function"==typeof t&&t(this,0),0)},i.prototype.count=function(n){var t,e,i,r,o;if(null==n&&(n=""),null!=n&&"function"==typeof n){for(t=0,o=this.collection,e=0,i=o.length;e<i;e++)r=o[e],n(r)&&t++;return t}return this.collection.length},i.prototype.size=function(n){return null==n&&(n=""),this.count(n)},i.prototype.length=function(n){return null==n&&(n=""),this.count(n)},i.prototype.each=function(n,t){var e,i,r,o,l;if(null==n&&(n=""),null!=n&&"function"==typeof n)for(e=0,l=this.collection,i=0,r=l.length;i<r;i++)o=l[i],e+=1,n(o),e===this.count()&&"function"==typeof t&&t(this);return this},i.prototype.select=function(n,t){var e;return null==t&&(t=""),e=new this.constructor,"function"==typeof n?this.each(function(t){if(n(t))return e.push(t)}):"object"==typeof n&&this.each(function(t){var i,r,o;o=!0;for(i in n)r=n[i],t[i]!==r&&(o=!1);if(o)return PinkmanController.isInstance(t)||PinkmanAction.isInstance(t)?e.forcePush(t):e.push(t)}),"function"==typeof t&&t(e),e},i.prototype.absorb=function(n,t){if("object"==typeof n&&n.isPink&&n.isCollection)return this.each(function(t){return function(e){var i;if(i=n.find(e.id),null!=i)return t.remove(e,function(){return t.forceUnshift(i)})}}(this),t)},i.prototype.substitute=function(n,t,e){if(null!=n&&null!=t&&(this.remove(n),this.push(t),"function"==typeof e))return e()},i.prototype.push=function(n){var t,e,i;if(Pinkman.isArray(n)){for(e=0,i=n.length;e<i;e++)t=n[e],this.pushIndividually(t);return this.include(n)}return this.pushIndividually(n)},i.prototype.unshift=function(n){var t,e,i;if(Pinkman.isArray(n)){for(e=0,i=n.length;e<i;e++)t=n[e],this.unshiftIndividually(t);return this.include(n)}return this.unshiftIndividually(n)},i.prototype.pushIndividually=function(n){return null!=n&&"object"==typeof n&&!this.include(n)&&this.beforeInsertionPrep(n,function(n){return function(t){return n.collection.push(t),t.isObject&&null!=t.collections&&t.collections.push(n),!0}}(this))},i.prototype.directPush=function(n){if(!this.include(n))return this.collection.push(n)},i.prototype.forcePush=function(n){return this.collection.push(n)},i.prototype.directUnshift=function(n){if(!this.include(n))return this.collection.unshift(n)},i.prototype.forceUnshift=function(n){return this.collection.unshift(n)},i.prototype.unshiftIndividually=function(n){return null!=n&&"object"==typeof n&&!this.include(n)&&this.beforeInsertionPrep(n,function(n){return function(t){return n.collection.unshift(t),t.isObject&&null!=t.collections&&t.collections.push(n),!0}}(this))},i.prototype.beforeInsertionPrep=function(n,t){var e;return null==t&&(t=""),n.isPink||(e=this["new"](),e.assign(n),n=e),"function"==typeof t&&t(n),n},i.prototype.pop=function(){return this.remove(this.last())},i.prototype.shift=function(){return this.remove(this.first())},i.prototype.remove=function(n,t){var e,i,r;return"object"==typeof n&&null!=n.id&&null!=(e=this.find(n.id))?(i=this.collection.indexOf(e),this.collection.splice(i,1),r=e):(i=this.collection.indexOf(n),this.collection.splice(i,1),r=n),"function"==typeof t&&t(this),r},i.prototype.removeBy=function(n,t){if(null!=n&&null!=t)return this.remove(this.getBy(n,t))},i.prototype.removeAll=function(){return!this.any()||(this.remove(this.first()),this.removeAll())},i.prototype.include=function(n){var t,e,i,r;if(null!=n&&Pinkman.isArray(n)){for(r=!0,e=0,i=n.length;e<i;e++)t=n[e],this.include(t)||(r=!1);return r}return null!=n&&"object"==typeof n&&(null!=n.id?this.any(function(t){return n.id===t.id}):this.collection.indexOf(n)!==-1)},i.prototype.firstOrInitialize=function(){var n,t;return n=1<=arguments.length?e.call(arguments,0):[],t=this.select.apply(this,n),t.any()?t.first():this.forceNew.apply(this,n)},i.prototype.forceNew=function(){var n,t;return n=1<=arguments.length?e.call(arguments,0):[],t=new this.config.memberClass,t.initialize.apply(t,n),this.push(t),t},i.prototype.first=function(n){return null==n&&(n=1),1===n?this.collection[0]:this.collection.slice(0,+(n-1)+1||9e9)},i.prototype.last=function(n){return null==n&&(n=1),1===n?this.collection[this.collection.length-1]:this.collection.slice(this.collection.length-n-1)},i.prototype.any=function(n){return null==n&&(n=""),null==n||"function"!=typeof n&&"object"!=typeof n?this.count()>0:this.select(n).count()>0},i.prototype.empty=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],!this.any.apply(this,n)},i.prototype.getBy=function(n,t,e){var i;if(null!=n&&null!=t)return i=new Object,i[n]=t,this.getByAttributes(i,e)},i.prototype.getByAttributes=function(n,t){var e,i,r,o,l,u,c;if(null==n||"object"!=typeof n||!this.any())return null;for(u=this.collection,e=0,r=u.length;e<r;e++){l=u[e],o=!0;for(i in n)c=n[i],l[i]!==c&&(o=!1);if(o)return"function"==typeof t&&t(l),l}},i.prototype.getByPinkey=function(n){return this.getBy("pinkey",n)},i.prototype.get=function(){var n;if(n=1<=arguments.length?e.call(arguments,0):[],n.length>0){if(Pinkman.isNumber(n[0]))return this.getByPinkey(n[0]);if(2===n.length)return this.getBy.apply(this,n);if("object"==typeof n[0])return this.getByAttributes(n[0])}},i.prototype.find=function(n,t){var e;if(null!=n)return e=this.getBy("id",n,t)},i.prototype.next=function(n){var t;return t=this.collection.indexOf(n),this.collection[t+1]},i.prototype.prev=function(n){var t;return t=this.collection.indexOf(n),this.collection[t-1]},i.prototype.logPinkeys=function(){return this.each(function(n){return console.log(n.pinkey)})},i.prototype.uniq=function(n){var t,e,i,r;for(null==n&&(n=""),e=[],this.each(function(n){return function(t){return n.each(function(n){if(null!=t.pinkey&&t.pinkey===n.pinkey&&t!==n&&e.push(n),null!=t.id&&t.id===n.id&&t!==n)return e.push(n)})}}(this)),i=0,r=e.length;i<r;i++)t=e[i],this.remove(t);return this},i.prototype.fetchFromArray=function(n){var t,e,i,r;for(e=0,i=n.length;e<i;e++)t=n[e],r=this.beforeInsertionPrep(t),null!=r&&null!=this.find(r.id)?this.find(r.id).assign(r.attributes()):this.push(r);return this},i.prototype.assign=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],this.fetchFromArray.apply(this,n)},i.prototype.merge=function(n){return Pinkman.isArray(n)?this.fetchFromArray(n):"object"==typeof n&&n.isPink&&n.isCollection?this.fetchFromArray(n.collection):void 0},i.prototype["new"]=function(n){return null!=this._new&&null==this._new.id?this._new:(this._new=new this.config.memberClass,this._new.initialize(n),this._new)},i.prototype.reload=function(n){if(null==n&&(n=""),this.any())return this.each(function(t){return function(e){if(null!=e.id)return e.reload(function(e){if(e.pinkey===t.last().pinkey&&"function"===n)return n(t)})}}(this))},i.prototype.makeIndex=function(){var n,t,e,i,r;if(this.any()){for(n=1,r=this.collection,t=0,e=r.length;t<e;t++)i=r[t],i.set("index",n),n++;return!0}return!1},i.prototype.sortBy=function(n,t){var e;return null==t&&(t="asc"),e=this.collection.sort(function(t,e){return"string"==typeof t[n]&&"string"==typeof e[n]?t[n].toLowerCase()>=e[n].toLowerCase()?1:-1:t[n]>=e[n]?1:-1}),this.collection="asc"===t.toLowerCase()?e:e.reverse(),this},i.prototype.shuffle=function(){var n,t,e,i;if(this.any()){for(n=this.collection.length,e=[];0!==n;)t=Math.floor(Math.random()*n),n-=1,i=this.collection[n],this.collection[n]=this.collection[t],e.push(this.collection[t]=i);return e}},i.prototype.rand=function(n){var t,e,i;if(this.any()){for(e=new this.constructor,t=Math.min(n,this.count());0!==t;)i=Math.floor(Math.random()*this.count()),t-=1,e.forcePush(this.collection[i]);return 1===e.count()?e.first():e}},i.prototype.filter=function(n,t,e){var i,r,o,l,u;if(null!=n&&null!=t&&""!==t&&"string"==typeof n){if(this.any())for(i=new this.constructor,u=this.collection,r=0,o=u.length;r<o;r++)l=u[r],l[n]===t?i.push(l):null!=l[n]&&"string"==typeof l[n]&&""!==l[n]&&"string"==typeof t&&""!==t&&l[field].toLowerCase().indexOf(t.toLowerCase())>-1&&i.push(l);return null!=e&&"function"==typeof e&&e(i),i}return!1},i.prototype.fetch=function(n){return null==n&&(n=""),this.fetchFromUrl({url:this.api(),callback:n})},i.prototype.fetchFrom=function(n,t,e){return null!=n&&null!=t&&this.fetchFromUrl({url:this.api()+(n+"/"+t),callback:e})},i.prototype.fetchFromUrl=function(n){if(null!=n&&"object"==typeof n&&null!=n.url)return Pinkman.hasScope(this)&&(null==n.params&&(n.params=new Object),n.params.scope=Pinkman.scope(this)),this.doneFetching=null,this.fetchingFrom=n.url,Pinkman.ajax.get({url:Pinkman.json2url(n.url,n.params),complete:function(t){return function(e){var i;if(null!=e&&(null==e.errors&&null==e.error||(i=[e.errors,e.error],t.errors=i[0],t.error=i[1]),null!=n.params&&null!=n.params.limit?t.doneFetching=e.length<n.params.limit:t.doneFetching=0===e.length,t._recent=new t.constructor,e.length>0&&(t._recent.fetchFromArray(e),t.fetchFromArray(e))),null==e&&(t.doneFetching=!0),null!=n.callback&&"function"==typeof n.callback)return n.callback(t)}}(this)}),this},i.prototype.fetchMore=function(n,t){if(null==n&&(n=10),null==t&&(t=""),!this.doneFetching)return null!=this.fetchingFrom?this.fetchFromUrl({url:this.fetchingFrom,params:{limit:n,offset:this.count()},callback:t}):this.fetchFromUrl({url:this.api(),params:{limit:n,offset:this.count()},callback:t})},i.prototype.fetchMoreFrom=function(n,t,e,i){return null==i&&(i=""),this.fetchFromUrl({url:this.api()+(t+"/"+e),params:{limit:n,offset:this.count()},callback:i})},i.prototype.search=function(n,t){return null==t&&(t=""),this.removeAll(),this.fetchFromUrl({url:this.api()+"search",params:{query:n},callback:t})},i}(window.PinkmanCommon),window.Pinkman.collection=window.PinkmanCollection}.call(this),function(){Pinkman.templates=new Pinkman.collection,Pinkman.template_engine="handlebars",Pinkman.template_engines={handlebars:function(n,t){if("undefined"!=typeof Handlebars&&null!==Handlebars)return n.handlebars=Handlebars.compile(t),n.render=function(n){return this.handlebars(n)},n},hogan:function(n,t){if("undefined"!=typeof Hogan&&null!==Hogan)return n.hogan=Hogan.compile(t),n.render=function(n){return this.hogan.render(n)},n},markup:function(n,t){if("undefined"!=typeof Mark&&null!==Mark)return n.render=function(n){return Mark.up(t,n)},n},template:function(n){var t;return Pinkman.templates.include({template:n.template,engine:n.engine})?t=Pinkman.templates.get({template:n.template,engine:n.engine}):(t=new Pinkman.object({template:n.template,engine:n.engine}),this.compile(n.engine,t,this.templateModifier($("#"+n.template).html())),Pinkman.templates.push(t)),t},templateModifier:function(n){return Pinkman.unescape(this.templateAdapter(this.partialAdapter(n)))},attrAdapterHelper:function(n,t,e,i){var r,o,l;return r=e.split("."),o=r.pop(),r.push("pinkey"),l=r.join("."),t+'<pink data-pinkey="{{ '+l+' }}" data-attribute="'+o+'">{{ '+e+" }}</pink>"+i},templateAdapter:function(n){var t,e,i;return null!=n&&""!==n?(i=/([^'"]){{(?!\.)(?:\s)*([\w\d.]+)(?:\s)*}}([^'"])/gm,t=n.replace(i,this.attrAdapterHelper),e=/{{\./gm,t.replace(e,"{{")):""},partialAdapter:function(n){var t;return null!=n&&""!==n?(t=/{{(?:\s)*partial\((?:\s)*((?:\w|-)*)(?:\s)*\)(?:\s)*}}/gm,n.replace(t,this.partialInception)):""},partialInception:function(n,t){var e;return e=$("script#"+t+".p[type='text/p-partial']"),e.length?e.html():n},context:function(n){return null!=n.context&&(n.object=n.context),null!=n.object&&"object"==typeof n.object||(n.object=new Object),n.object},compile:function(n,t,e){var i;return i=Pinkman.template_engines[n],i(t,e),t},renderOntarget:function(n,t){if(null!=n.target)return $("#"+n.target).html(t),null!=n.object&&"object"==typeof n.object&&n.object.isPink&&$("#"+n.target).attr("data-pinkey",n.object.pinkey),$("#"+n.target+" select").each(function(n,t){var e;return e=Pinkman.get($(t).data("pinkey")),$(t).find("option[value='"+e[$(t).attr("name")]+"']").attr("selected","selected")})},render:function(n){var t,e,i,r,o,l;if(null!=n&&null!=n.template&&$("#"+n.template).length){if(l=this.template(n),t=l.render(this.context(n)),this.renderOntarget(n,t),n.freeze&&null!=Pinkman.scrolling)if("string"==typeof n.freeze)Pinkman.restoreElementScrollPosition(n.freeze);else if(Pinkman.isArray(n.freeze))for(o=n.freeze,e=0,i=o.length;e<i;e++)r=o[e],Pinkman.restoreElementScrollPosition(r);return null!=n.callback&&"function"==typeof n.callback&&n.callback(n.object,t),t}}},Pinkman.__syncing=new Object,Pinkman.sync=function(n,t,e){if("object"==typeof n&&null!=n.pinkey&&null!=n[t]&&(null!=e||Pinkman.isPrintable(n[t])))return null!=e&&""!==e||(e=n[t]),$("pink[data-pinkey='"+n.pinkey+"'][data-attribute='"+t+"']").html(e)},Pinkman.render=function(n){if(null!=n.reRender&&n.reRender===!1||(n.reRender=!0),null!=n.collectionReRender&&n.collectionReRender===!1||(n.collectionReRender=!0),null!=n.engine&&""!==n.engine||(n.engine=Pinkman.template_engine),Pinkman.template_engines.render(n),n.reRender&&null!=n.object&&n.object.isPink)return n.object.queue(n)},null==Pinkman.scrolling&&(Pinkman.scrolling=new PinkmanCollection),Pinkman.saveElementScrollPosition=function(n){var t,e;return t=Pinkman.scrolling.find(n),null==t&&(t=new Pinkman.object),t.set("id",n),e=document.getElementById(n)?document.getElementById(n).scrollTop:0,t.set("position",e),Pinkman.scrolling.push(t)},Pinkman.restoreElementScrollPosition=function(n){if(Pinkman.scrolling.include({id:n}))return document.getElementById(n).scrollTop=Pinkman.scrolling.find(n).position},Pinkman.reRender=function(n){var t,e,i,r,o,l,u,c,s,a,p,f,h;if(null!=n.renderQueue){for(e=!1,p=n.renderQueue.collection,i=0,l=p.length;i<l;i++){if(a=p[i],null!=a.freeze)if("string"==typeof a.freeze)Pinkman.saveElementScrollPosition(a.freeze);else if(Pinkman.isArray(a.freeze))for(f=a.freeze,r=0,u=f.length;r<u;r++)s=f[r],Pinkman.saveElementScrollPosition(s);Pinkman.template_engines.render(a),a.collectionReRender&&(e=!0)}if(e&&null!=n.collections)for(h=n.collections.collection,o=0,c=h.length;o<c;o++)t=h[o],t.reRender();return n.renderQueue.any()}return!0}}.call(this),function(){Pinkman.css=function(n,t,e){return $("style#pinkman-css-injector").append(n+" { "+t+": "+e+"; }")},$(document).ready(function(){if(!$("style#pinkman-css-injector").length&&($("head").append('<style id="pinkman-css-injector" type="text/css">pink{display: inline; margin: 0; padding: 0; color: inherit; background-color: inherit; font: inherit;} template, template *{ display: none !important;}</style>'),null!=document.createElement))return document.createElement("pink")})}.call(this),function(){var n=function(n,e){function i(){this.constructor=n}for(var r in e)t.call(e,r)&&(n[r]=e[r]);return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n},t={}.hasOwnProperty,e=[].slice;Pinkman.bottomDistance=800,Pinkman.maxSearchLevel=15,Pinkman.closest=function(n,t){var e;return null==t&&(t=0),n.is("[data-pinkey]")?(e=n.attr("data-pinkey"),Pinkman.get(e)):t<Pinkman.maxSearchLevel?Pinkman.closest(n.parent(),t+1):null},window.PinkmanController=function(t){function i(){var n;n=1<=arguments.length?e.call(arguments,0):[],this.actions=new PinkmanActions,i.__super__.constructor.apply(this,n)}return n(i,t),i.prototype.clear=function(){return this.actions.each(function(n){return n.clear()})},i.prototype.selector=function(){return"#"+this.id},i.prototype.setParams=function(n){var t,e,i;if(e=location.search.substring(1),null!=e&&""!==e?this.params=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'):this.params=new Object,null!=n&&"object"==typeof n)for(t in n)i=n[t],this.params[t]=i;return this.params},i.prototype.title=function(n){if(Pinkman.isString(n))return $("title").html(n)},i.prototype.build=function(n){return null!=this.builder&&"function"==typeof this.builder&&(this.builder(this),null!=this.main&&(n||$("#"+this.id).length&&"function"==typeof this.main)&&this.main(),!0)},i.prototype.action=function(){var n,t,i,r,o,l,u;return t=1<=arguments.length?e.call(arguments,0):[],1===t.length?this.actions.getBy("name",t[0]):(l=t[0],r=t[1],i=t[2],u=4<=t.length?e.call(t,3):[],o=this.pinkey+"-"+l+"-"+r,n=new PinkmanAction({id:o,name:l,eventName:r,call:i,controller:this}),n.set("selector","#"+n.controller.id+" [data-action='"+n.name+"']"),Pinkman.actions.push(n),this.actions.push(n)&&null!=n.call&&"function"==typeof n.call&&n.listen(),n)},i.prototype.esc=function(n){var t;return t=new PinkmanAction({name:"esc",eventName:"keyup",controller:this}),t.call=function(t,e,i){if(27===i.keyCode)return n()},Pinkman.actions.push(t),this.actions.push(t),t.listen(),t},i.prototype.bind=function(n,t){var e,i,r,o;if(null==t&&(t=""),Pinkman.isArray(n)){for(o=[],i=0,r=n.length;i<r;i++)e=n[i],o.push(this.bindIndividually(e,t));
return o}return this.bindIndividually(n,t)},i.prototype.bindIndividually=function(n,t){if(null==t&&(t=""),$("#"+this.id).length)return this.action(n,["keyup","change"],function(){var i,r,o;if(o=arguments[0],r=arguments[1],i=3<=arguments.length?e.call(arguments,2):[],o[n]!==r.val()&&(o.set(n,r.val()),null!=t&&"function"==typeof t))return t.apply(null,[o,r].concat(e.call(i)))})},i.prototype.bottom=function(n){if($("#"+this.id).length)return setTimeout(function(){return null==Pinkman._lastEndOfPage&&(Pinkman._lastEndOfPage=0),$(window).scroll(function(){var t,e;if(e=Date.now(),t=$(document).height()-$(window).scrollTop()-document.body.offsetHeight,(t<Pinkman.bottomDistance&&Pinkman._lastEndOfPage<e||0===t)&&!Pinkman._bottomTriggered)return Pinkman._bottomTriggered=!0,Pinkman._lastEndOfPage=e,n()})},50)},i.prototype.endBottom=function(){return Pinkman._bottomTriggered=!1},i.prototype.subscribe=function(n,t){var e,i;if(null==Pinkman.cable)throw"ActionCable not found.";if(null==n||""===n)throw"Channel not specificied.";try{e="function"==typeof t?t:t.callback}catch(n){throw"Callback not found."}return i="object"==typeof t&&null!=t.params?t.params:new Object,i.channel=n,Pinkman.cable.subscriptions.create(i,{received:e})},i.prototype.scrolling=function(n){if($("#"+this.id).length)return $(window).scroll(function(){if(!Pinkman._stopScroll)return Pinkman._stopScroll=!0,n(window.scrollY)})},i.prototype.endScroll=function(){return Pinkman._stopScroll=!1},i.prototype.drop=function(n,t){return this.action(n,"click",function(n,e,i){if(null!=t.click&&"function"==typeof t.click)return t.click(n,e,i)}),this.action(n,"dragenter",function(n,e,i){if(null!=t.enter&&"function"==typeof t.enter)return t.enter(n,e,i)}),this.action(n,"dragover",function(n,e,i){if(null!=t.over&&"function"==typeof t.over)return t.over(n,e,i)}),this.action(n,"dragleave",function(n,e,i){return t.leave(n,e,null!=t.leave&&"function"==typeof t.leave?i:void 0)}),this.action(n,"drop",function(n,e,i){if(null!=Pinkman.dragged?null!=t.drop&&"function"==typeof t.drop&&t.drop(n,e,Pinkman.dragged.obj,Pinkman.dragged.j,i):null!=t.drop&&"function"==typeof t.drop&&t.drop(n,e,i),null!=t.files&&"function"==typeof t.files)return t.files(n,i.originalEvent.dataTransfer.files,e)})},i.prototype.drag=function(n){return this.action(n,"mousedown",function(n,t,e){return t.attr("draggable","true"),Pinkman.dragged=new Pinkman.object({obj:n,j:t,ev:e})})},i.prototype.isActive=function(){return $("#"+this.id).length>0},i}(window.PinkmanObject),window.PinkmanControllers=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.clear=function(n){return this.pinkey===Pinkman.controllers.pinkey&&this.unbindScrolling(),this.each(function(n){return n.clear()},n)},e.prototype.unbindScrolling=function(){return $(window).off("scroll")},e}(window.PinkmanCollection),window.PinkmanAction=function(t){function i(){var n;n=1<=arguments.length?e.call(arguments,0):[],i.__super__.constructor.apply(this,n),this.events=[]}return n(i,t),i.prototype.mirror=function(n,t){var i;return i=new PinkmanActions,Pinkman.controllers.select({id:n}).each(function(n){return n.actions.select({name:t}).each(function(n){return i.forcePush(n)})}),this.call=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],i.call.apply(i,n)},this.listen()},i.prototype.redirect=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],this.mirror.apply(this,n)},i.prototype.redirectTo=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],this.mirror.apply(this,n)},i.prototype.clear=function(){var n,t,e,i,r;for(i=this.events,r=[],t=0,e=i.length;t<e;t++)n=i[t],r.push($("body").off(n,this.selector));return r},i.prototype.attach=function(n){var t;if(Pinkman.isString(n))return t=this,this.events.push(n),$("body").on(n,t.selector,function(e){var i;return"keypress"!==n&&"mousedown"!==n&&e.preventDefault(),i=window.Pinkman.closest($(this)),t.call(i,$(this),e)})},i.prototype.listen=function(){var n,t,e,i,r;if(Pinkman.isString(this.eventName))return this.attach(this.eventName);if(Pinkman.isArray(this.eventName)){for(i=this.eventName,r=[],t=0,e=i.length;t<e;t++)n=i[t],r.push(this.attach(n));return r}},i}(window.PinkmanObject),window.PinkmanActions=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.call=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],this.each(function(t){return t.call.apply(t,n)})},i.prototype.find=function(n,t){return this.select({name:n},t)},i}(window.PinkmanCollection),Pinkman.controllers=new window.PinkmanControllers,Pinkman.controllers.isActive=function(n){return null!=this.find(n)},Pinkman.controllers.def=function(n,t){return $(document).ready(function(){var e;return null!=n&&null!=t&&(e=new PinkmanController({id:n,builder:t}),Pinkman.controllers.forcePush(e),e.build())})},Pinkman.controller=function(){var n,t;return n=1<=arguments.length?e.call(arguments,0):[],1===n.length?Pinkman.controllers.find(n[0]):(t=Pinkman.controllers).def.apply(t,n)},Pinkman.actions=new PinkmanActions,$(document).ready(function(){return sleep(.1,function(){var n,t;return n=[],Pinkman.actions.each(function(t){if("click"===t.eventName||Pinkman.isArray(t.eventName)&&t.eventName.indexOf("click")!==-1)return n.push(t.selector)}),t=n.join(", "),Pinkman.css(t,"cursor","pointer !important")})})}.call(this),function(){var n=function(n,e){function i(){this.constructor=n}for(var r in e)t.call(e,r)&&(n[r]=e[r]);return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n},t={}.hasOwnProperty;window.PinkmanStates=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.config={className:"PinkmanStates",memberClass:function(){return new PinkmanState}},e}(Pinkman.collection),Pinkman.states=new PinkmanStates,window.PinkmanState=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.config={className:"PinkmanState"},e.initialize=function(){var n;if(Pinkman.states.empty()&&"undefined"!=typeof window&&null!==window&&"undefined"!=typeof history&&null!==history&&null!=history.replaceState)return n=Pinkman.states.forceNew({path:window.location.pathname}),history.replaceState({pinkey:n.pinkey},"",n.path)},e.push=function(n){var t;if(Pinkman.isString(n)&&(n=this.normalizePath(n),t=Pinkman.states.forceNew({path:n}),"undefined"!=typeof window&&null!==window&&"undefined"!=typeof history&&null!==history&&null!=history.pushState))return history.pushState({pinkey:t.pinkey},"",n)},e.normalizePath=function(n){return n=n.replace(window.location.origin,""),"/"===n[0]?window.location.origin+n:window.location.origin+"/"+n},e.restore=function(n){var t;if("object"==typeof n&&null!=n.state&&null!=n.state.pinkey)return t=Pinkman.states.firstOrInitialize({pinkey:n.state.pinkey}),null==t.path&&t.set("path",window.location.pathname),t.restore()},e.prototype.restore=function(){return Pinkman.router.restore(this.path)},e}(Pinkman.object),Pinkman.state=PinkmanState,$(document).ready(function(){if("undefined"!=typeof window&&null!==window&&"undefined"!=typeof history&&null!==history)return window.onpopstate=function(n){return Pinkman.state.restore(n)}})}.call(this),function(n,t,e,i,r,o,l){n.GoogleAnalyticsObject=r,n[r]=n[r]||function(){(n[r].q=n[r].q||[]).push(arguments)},n[r].l=1*new Date,o=t.createElement(e),l=t.getElementsByTagName(e)[0],o.async=1,o.src=i,l.parentNode.insertBefore(o,l)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),function(){var n=function(n,e){function i(){this.constructor=n}for(var r in e)t.call(e,r)&&(n[r]=e[r]);return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n},t={}.hasOwnProperty,e=[].slice;window.PinkmanPath=function(t){function e(n){var t,i,r,o,l,u,c,s;if(this.levels=new Pinkman.collection,this["static"]=new Pinkman.collection,this.dynamic=new Pinkman.collection,this.params=new Object,e.__super__.constructor.call(this),Pinkman.isString(n)){for(e.isInternal(n)&&(n=n.replace(window.location.origin,"")),t=n.split("/"),""===t[0]&&t.shift(),""===t[t.length-1]&&t.pop(),r=0,s=0,i=0,o=0,u=t.length;o<u;o++)l=t[o],r+=1,c=new Pinkman.object({entry:l,index:r}),/:/.test(l[0])?(i+=1,c.set("dynamic",!0),c.set("static",!1),this.dynamic.push(c)):(s+=1,c.set("dynamic",!1),c.set("static",!0),this["static"].push(c)),this.levels.push(c);this.set("depth",r),this.set("staticDepth",s),this.set("dynamicDepth",i)}}return n(e,t),e.isExternal=function(n){var t,e;return e=new RegExp("^(?:[a-z]+:)?//","i"),t=new RegExp(window.location.origin,"i"),e.test(n)&&!t.test(n)},e.isInternal=function(n){return!this.isExternal(n)},e.prototype.level=function(n){return this.levels.getBy("index",n)},e.prototype.match=function(n){var t;return Pinkman.isString(n)&&(n=new e(n)),!(!e.isInstance(n)||n.depth!==this.depth)&&(t=!0,this["static"].each(function(e){if(e.entry!==n.level(e.index).entry)return t=!1}),t&&this.dynamic.each(function(t){return n.params[t.entry.replace(/:/g,"")]=n.level(t.index).entry}),t)},e}(Pinkman.object),window.PinkmanRouteMatcher=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(n){return null!=this.controllers.any()&&(Pinkman.controllers.unbindScrolling(),this.controllers.each(function(n){return function(t){return t.setParams(n.params()),t.build(!0)}}(this),function(t){return function(){if("function"==typeof n)return n(t.route,t.url)}}(this)))},e.prototype.match=function(n){var t,e,i,r;if(e=new PinkmanPath(n),null!=e){if(t=Pinkman.routes.select({depth:e.depth}),r=t.select(function(n){return n.path.match(e)}),i=r.sortBy("staticDepth","desc").first(),null!=i){if(this.set("url",n),this.set("path",e),this.set("route",i),this.set("controller",this.route.controller),this.set("controllers",Pinkman.controllers.select({id:this.controller})),this.controllers.any())return this;throw"(Pinkman Route) Controller '"+this.route.controller+"' not found."}return!1}},e.prototype.params=function(){if(this.path&&null!=this.path.params)return this.path.params},e}(Pinkman.object),window.PinkmanRoute=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.yieldIn=function(){return this["yield"]||this.container},e}(Pinkman.object),window.PinkmanRoutes=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.config={className:"PinkmanRoutes",memberClass:function(){return new PinkmanRoute}},e.prototype.match=function(n){var t;return t=new PinkmanRouteMatcher,t.match(n)},e}(Pinkman.collection),Pinkman.routes=new PinkmanRoutes,window.PinkmanRouter=function(){function n(){}return n.config=function(n){return $(document).ready(function(t){return function(){if(null==n||"object"!=typeof n||null==n["yield"])throw"(Pinkman Router) Config argument must be a object and must have yield attribute.";if(t._config=n,0===$(t._config["yield"]).length)throw"PinkmanRouter Config: yield must be a valid(present) selector"}}(this))},n.define=function(t){var e;return e=new n,"function"==typeof t&&t(e),e},n.scrolling=new PinkmanCollection,n.saveWindowScroll=function(n){return this.scrolling.firstOrInitialize({id:n}).set("position",window.scrollY)},n.restoreWindowScroll=function(n){var t;return t=this.scrolling.firstOrInitialize({id:n}),null==t.position&&(t.position=0),window.scrollTo(0,t.position)},n.analytics={create:function(n){return console.log("chamou"),console.log(n),ga("create",n,"auto"),ga("send","pageview")},send:function(n,t){var e;return null!=this.created&&this.created?(e=new RegExp(window.location.origin),t=e.test(t)?t.replace(e,""):t,ga("set","page",t),ga("send","pageview",t)):(console.log(this),this.create(Pinkman.router._config.analytics),this.created=!0)}},n.render=function(n,t){var i;return null!=Pinkman.routes.current&&this.saveWindowScroll(Pinkman.routes.current.controller),Pinkman.state.initialize(),i=n.route.yieldIn()||this._config["yield"],n.route.blank&&$(i).html("<div class='pink-yield' id='"+n.controller+"'></div>"),n.initialize(function(n){return function(){var i,r,o;if(i=1<=arguments.length?e.call(arguments,0):[],null!=n._config.analytics&&(r=n.analytics).send.apply(r,i),"function"==typeof t&&t(),"function"==typeof n._config.callback)return(o=n._config).callback.apply(o,i)}}(this)),Pinkman.routes.set("current",n.route),Pinkman.router._config.freeze||null!=n.options&&n.options.freeze?sleep(.15,function(t){return function(){return t.restoreWindowScroll(n.route.controller)}}(this)):window.scrollTo(0,0),!0},n.activate=function(n,t,e){var i;return i=Pinkman.routes.match(n),!(null==i||!i)&&(i.options=e,null!=this._config.transition&&"function"==typeof this._config.transition?this._config.transition(function(n){return function(){return n.render(i,t)}}(this)):this.render(i,t))},n.visit=function(n){return this.activate(n,function(){return Pinkman.state.push(n)})},n.force=function(n){if(!this.visit(n))return window.location=n},n.restore=function(n){if(!this.activate(n,null,{freeze:!0}))return window.location=n},n.redirect=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],this.force.apply(this,n)},n.redirectTo=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],this.force.apply(this,n)},n.go=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],this.force.apply(this,n)},n.forward=function(){if(null!=window.history)return window.history.forward()},n.back=function(){if(null!=window.history)return window.history.back()},n.start=function(){return Pinkman.ready(function(n){return function(){return Pinkman.router=n,n.activate(window.location.pathname),$("body").on("click","a",function(t){var e;if(t.preventDefault(),e=t.currentTarget.href,null==e||!n.visit(e))return window.location=e})}}(this))},n.prototype.get=function(n,t){var e,i;if(Pinkman.isString(n))return e=new PinkmanPath(n),i=new PinkmanRoute,i.set("id",n),i.set("url",n),i.set("path",e).set("depth",e.depth).set("staticDepth",e.staticDepth).set("dynamicDepth",e.dynamicDepth),i.set("blank",!0),i.set("controller",null!=t&&null!=t.controller?t.controller:e.level(1).entry),null!=t&&"object"==typeof t&&((null!=t.keep&&t.keep||null!=t.blank&&!t.blank)&&i.set("blank",!1),i.set("yield",t.container||t["yield"])),Pinkman.routes.push(i),i},n.prototype.root=function(n){return this.get("/",{controller:n})},n}()}.call(this),function(){"undefined"!=typeof ActionCable&&null!==ActionCable&&(Pinkman.cable=ActionCable.createConsumer())}.call(this);